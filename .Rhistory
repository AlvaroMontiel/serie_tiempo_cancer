bd_pulmon <- bd_pulmon %>% mutate(MORF_GRUPO = case_when(
MORF == 8000 | MORF == 8001 | MORF == 8002 ~ 1,
MORF == 8010 | MORF == 8012 | MORF == 8013 | MORF == 8021 | MORF == 8032 |
MORF == 8033 | MORF == 8041 | MORF == 8042 | MORF == 8043 | MORF == 8044 |
MORF == 8045 | MORF == 8046 ~ 2,
MORF == 8050 | MORF == 8070 | MORF == 8071 | MORF == 8072 | MORF == 8073 |
MORF == 8075 | MORF == 8076 ~ 3,
MORF == 8140 | MORF == 8211 | MORF == 8230 | MORF == 8240 | MORF == 8246 |
MORF == 8250 | MORF == 8252 | MORF == 8260 | MORF == 8263 | MORF == 8310 |
MORF == 8323 ~ 4,
MORF == 8430 | MORF == 8480 | MORF == 8481 | MORF == 8490 | MORF == 8550 |
MORF == 8800 | MORF == 8990 | MORF == 9050 | MORF == 8090 ~ 5)
)
## SEXO
table(factor(bd_pulmon$SEXO, levels=c(1,2), labels = c("H", "M")))
round(prop.table(table(factor(bd_pulmon$SEXO, levels=c(1,2), labels = c("H", "M"))))*100,2)
## REGIÓn
## PENDIENTE !!!!!
## COMUNA
table(factor(bd_pulmon$REGCOM, levels=c("02101", "02201", "02301"),
labels=c("Afta", "Calama", "Tocopilla")))
round(prop.table(table(factor(bd_pulmon$REGCOM, levels=c("02101", "02201", "02301"),
labels=c("Afta", "Calama", "Tocopilla"))))*100,2)
## MORFOLOGÍA
table(factor(bd_pulmon$MORF_GRUPO, levels = c(1,2,3,4,5), labels = c(
"Neoplasias, SAI", "Neoplasias Epiteliales, SAI", "Neoplasias de células escamosas", "Adenocarcinomas", "Otras morfologías")))
round(
prop.table(
table(
factor(
bd_pulmon$MORF_GRUPO, levels = c(1,2,3,4,5), labels = c(
"Neoplasias, SAI", "Neoplasias Epiteliales, SAI",
"Neoplasias de células escamosas", "Adenocarcinomas",
"Otras morfologías"))))*100,2)
## GRADO DE DIFERENCIACIÓN
table(factor(bd_pulmon$GRA, levels = c(1,2,3,4,9), labels =
c("Bien Diferenciado","Moderadamente Diferenciados",
"Poco Diferenciado","Anaplásico","Desconocido")))
round(prop.table(table(factor(
bd_pulmon$GRA, levels = c(1,2,3,4,9), labels =
c("Bien Diferenciado","Moderadamente Diferenciados",
"Poco Diferenciado","Anaplásico","Desconocido")
)))*100,2)
## EXTENSIÓN
table(factor(bd_pulmon$EXT, levels = c(1,2,3,9), labels = c(
"Localizado","Regional","Metástasis","Desconocido"
)))
round(prop.table(table(factor(bd_pulmon$EXT, levels = c(1,2,3,9),
labels=c(                                "Localizado","Regional","Metástasis","Desconocido"
)
)))*100,2)
## BASE DIAGNÓSTICO
table(factor(bd_pulmon$BASE, levels = c(0,1,2,5,6,7),
labels = c("Solo DCO","Clínica","Investigación Clínica","Citología","Histología de MTS","Histología de sitio primario")
))
round(prop.table(table(factor(bd_pulmon$BASE, levels = c(0,1,2,
5,6,7),
labels = c(
"Solo DCO","Clínica","Investigación Clínica","Citología","Histología de MTS","Histología de sitio primario"
))
))*100,2)
## PRIMARIO MÚLTIPLES
### HAY 134 NA, TRATAR DE ARREGLAR EN LA BASE DE CR5
addmargins(table(bd_pulmon$PMTOT))
bd_pulmon %>% summarise(
Mínimo = min(EDAD),
Rango = range(EDAD),
Qu_25 = quantile(EDAD, prob=c(0.25)),
Qu_50 = quantile(EDAD, prob=c(0.5)),
Qu_75 = quantile(EDAD, prob=c(0.75)),
Media = round(mean(EDAD),4),
Mediana = median(EDAD),
Varianza = round(var(EDAD),4),
Desv_Estándar = round(sd(EDAD),4),
CV = round(sd(EDAD)/mean(EDAD)*100,4),
Máximo = max(EDAD)
)
bd_pulmon %>% summarise(
Mínimo = min(EDAD),
#Rango = range(EDAD),
Qu_25 = quantile(EDAD, prob=c(0.25)),
Qu_50 = quantile(EDAD, prob=c(0.5)),
Qu_75 = quantile(EDAD, prob=c(0.75)),
Media = round(mean(EDAD),4),
Mediana = median(EDAD),
Varianza = round(var(EDAD),4),
Desv_Estándar = round(sd(EDAD),4),
CV = round(sd(EDAD)/mean(EDAD)*100,4),
Máximo = max(EDAD)
)
bd_pulmon %>% summarise(
Mínimo = min(EDAD),
Máximo = max(EDAD),
Rango = max(EDAD)-min(EDAD),
Qu_25 = quantile(EDAD, prob=c(0.25)),
Qu_50 = quantile(EDAD, prob=c(0.5)),
Qu_75 = quantile(EDAD, prob=c(0.75)),
Media = round(mean(EDAD),4),
Mediana = median(EDAD),
Varianza = round(var(EDAD),4),
Desv_Estándar = round(sd(EDAD),4),
CV = round(sd(EDAD)/mean(EDAD)*100,4)
)
bd_pulmon %>% summarise(
Mínimo = min(EDAD),
Máximo = max(EDAD),
Rango = max(EDAD)-min(EDAD),
Qu_25 = quantile(EDAD, prob=c(0.25)),
Qu_50 = quantile(EDAD, prob=c(0.5)),
Qu_75 = quantile(EDAD, prob=c(0.75)),
Media = round(mean(EDAD),4),
Mediana = median(EDAD),
Varianza = round(var(EDAD),4),
Desv_Estándar = round(sd(EDAD),4),
CV = round(sd(EDAD)/mean(EDAD)*100,4)
)
hist(bd_pulmon$EDAD)
plot(density(bd_pulmon$EDAD),
lwd=3,
col="blue3",
xlim = c(15, 100),
main="xxxx",
las=1,
xlab="Edad",
ylab="densidad")
hist(bd_pulmon$EDAD)
plot(density(bd_pulmon$EDAD),
lwd=3,
col="blue3",
xlim = c(15, 100),
main="Gráfico de densidad de la Edad",
las=1,
xlab="Edad",
ylab="densidad")
qqnorm(bd_pulmon$EDAD, pch=20, main="QQ Edad")
qqline(bd_pulmon$EDAD)
# H0 = la muestra proviene de una población normal
shapiro.test(bd_pulmon$EDAD)
by_fecdiag <- bd_pulmon %>% group_by(FECDIAG)
conteo <- by_fecdiag %>% tally()
plot(conteo$FECDIAG, conteo$n)
install.packages("tidyverse")
install.packages("lubridate")
View(bd_pulmon)
by_fecdiag <- bd_pulmon %>% group_by(FECDIAG)
conteo <- by_fecdiag %>% tally()
plot(conteo$FECDIAG, conteo$n)
by_fecdiag <- bd_pulmon %>% group_by(FECDIAG)
conteo <- by_fecdiag %>% tally()
conteo
by_fecdiag <- bd_pulmon %>% group_by(FECDIAG)
conteo <- by_fecdiag %>% tally()
library(tidyverse)
library(lubridate)
casos_nuevos_ts <- ts(conteo, start=2013, frecuency=12)
by_fecdiag <- bd_pulmon %>% group_by(FECDIAG)
conteo <- by_fecdiag %>% tally()
library(tidyverse)
library(lubridate)
casos_nuevos_ts <- ts(conteo, start=2013, frequency=12)
casos_nuevos_ts
by_fecdiag <- bd_pulmon %>% group_by(FECDIAG)
conteo <- by_fecdiag %>% tally()
library(tidyverse)
library(lubridate)
casos_nuevos_ts <- ts(conteo, start=2003, frequency=12)
casos_nuevos_ts
by_fecdiag <- bd_pulmon %>% group_by(FECDIAG)
conteo <- by_fecdiag %>% tally()
library(tidyverse)
library(lubridate)
casos_nuevos_ts <- ts(conteo, start=2003, frequency=365)
casos_nuevos_ts
by_fecdiag <- bd_pulmon %>% group_by(FECDIAG)
conteo <- by_fecdiag %>% tally()
library(tidyverse)
library(lubridate)
casos_nuevos_ts <- ts(conteo$n, start=2003, frequency=365)
casos_nuevos_ts
plot(casos_nuevos_ts)
by_fecdiag <- bd_pulmon %>% group_by(FECDIAG)
conteo <- by_fecdiag %>% tally()
library(tidyverse)
library(lubridate)
casos_nuevos_ts <- ts(conteo, start=2003, frequency=365)
plot(casos_nuevos_ts)
plot(conteo)
plot(conteo$n)
casos_nuevos_ts <- ts(conteo[,1], start=2003, frequency=365)
casos_nuevos_ts <- ts(conteo[,1], start=2003, frequency=365)
plot(casos_nuevos_ts)
casos_nuevos_ts
by_fecdiag <- bd_pulmon %>% group_by(FECDIAG)
conteo <- by_fecdiag %>% tally()
library(tidyverse)
library(lubridate)
casos_nuevos_ts <- ts(conteo$n[,1], start=2003, frequency=365)
casos_nuevos_ts <- ts(conteo[,2], start=2003, frequency=365)
plot(casos_nuevos_ts)
by_fecdiag <- bd_pulmon %>% group_by(FECDIAG)
conteo <- by_fecdiag %>% tally()
library(tidyverse)
library(lubridate)
casos_nuevos_ts <- ts(conteo[,2], start=2003, frequency=12)
plot(casos_nuevos_ts)
by_fecdiag <- bd_pulmon %>% group_by(FECDIAG)
conteo <- by_fecdiag %>% tally()
library(tidyverse)
library(lubridate)
casos_nuevos_ts <- ts(conteo[,2], start=2003, frequency=365)
plot(casos_nuevos_ts)
by_fecdiag
conteo
## Fechas
as.Date(bd_pulmon$FECDIAG, "%Y%M%D")
## Fechas
as.Date(bd_pulmon$FECDIAG, "%Y/%m/%d")
## Fechas
as.Date(bd_pulmon$FECDIAG)
## Fechas
as.Date(bd_pulmon$FECDIAG, "%Y%m%d")
```{r}
by_fecdiag <- bd_pulmon %>% group_by(FECDIAG)
bd_pulmon$FECDIAG[,1]
bd_pulmon$FECDIAG[1]
bd_pulmon$FECDIAG[i]
i = 1
bd_pulmon$FECDIAG[i]
length(bd_pulmon$FECDIAG)
print(i)
for(i in length(bd_pulmon$FECDIAG)){
print(i)
}
for(i in bd_pulmon$FECDIAG){
print(i)
}
print(i)[4]
for(i in bd_pulmon$FECDIAG){
print(i)[4]
}
for(i in bd_pulmon$FECDIAG){
print(i)[,4]
}
print(i[4])
for(i in bd_pulmon$FECDIAG){
print(i[4])
}
print(i[,4])
print(i[,4])
print(str_sub(i, 1, 4))
for(i in bd_pulmon$FECDIAG){
print(str_sub(i, 1, 4))
}
print(str_sub(i, 1, 4))
str_sub(i, 1, 4)
str_sub(i, 5, 2)
str_sub(i, 1, 4)
i
str_sub(i, 5, 2)
str_sub(i, 2, 2)
str_sub(i, 3, 2)
str_sub(i, 1, 2)
str_sub(i, 2, 2)
i
for(i in bd_pulmon$FECDIAG){
print(str_sub(i, 1, 4))
print(str_sub(i, 5, 2))
}
#print(str_sub(i, 1, 4))
print(str_sub(i, 5, 2))
for(i in bd_pulmon$FECDIAG){
#print(str_sub(i, 1, 4))
print(str_sub(i, 5, 2))
}
print(i)
print(i)
for(i in bd_pulmon$FECDIAG){
print(i)
#print(str_sub(i, 1, 4))
print(str_sub(i, 5, 2))
}
#print(str_sub(i, 1, 4))
print(str_sub(i, 7, 2))
print(str_sub(i, -4, 2))
for(i in bd_pulmon$FECDIAG){
print(i)
print(str_sub(i, 1, 4))
print(str_sub(i, -4, 2))
}
for(i in bd_pulmon$FECDIAG){
print(i)
print(str_sub(i, 1, 4))
print(str_sub(i, -4, -2))
}
print(str_sub(i, -4, -2))
print(str_sub(i, -4, -1))
print(str_sub(i, -4, -3))
print(str_sub(i, -2, -1))
print(str_sub(i, 1, 4))
print(str_sub(i, -4, -3))
print(str_sub(i, -2, -1))
new_date <- str_c(str_sub(i, 1, 4),"-",str_sub(i, -4,-3),"-",str_sub(i, -2, -1))
new_date
## Fechas
for(i in bd_pulmon$FECDIAG){
new_date <- str_c(str_sub(i, 1, 4),"-",str_sub(i, -4,-3),"-",str_sub(i, -2, -1))
}
as.Date(new_date, "%Y-%m-%d")
class(as.Date(new_date, "%Y-%m-%d"))
## Fechas
for(i in bd_pulmon$FECDIAG){
new_date <- str_c(str_sub(i, 1, 4),"-",str_sub(i, -4,-3),"-",str_sub(i, -2, -1))
}
new_date <- as.Date(new_date, "%Y-%m-%d")
new_date
## Fechas
for(i in bd_pulmon$FECDIAG){
new_date <- str_c(str_sub(i, 1, 4),"-",str_sub(i, -4,-3),"-",str_sub(i, -2, -1))
}
new_date
contador += 1
contador <- 0
for(i in bd_pulmon$FECDIAG){
new_date <- str_c(str_sub(i, 1, 4),"-",str_sub(i, -4,-3),"-",str_sub(i, -2, -1))
contador += 1
for(i in bd_pulmon$FECDIAG){
new_date <- str_c(str_sub(i, 1, 4),"-",str_sub(i, -4,-3),"-",str_sub(i, -2, -1))
contador <- contador +  1
}
new_date
## Fechas
new_date <- list()
contador <- 1
for(i in bd_pulmon$FECDIAG){
new_date[[contador]] <- str_c(str_sub(i, 1, 4),"-",str_sub(i, -4,-3),"-",str_sub(i, -2, -1))
contador <- contador +  1
}
new_date <- as.Date(new_date, "%Y-%m-%d")
new_date
length(new_date)
new_date <- as.Date(new_date, "%Y-%m-%d")
## Fechas
new_date <- c()
contador <- 1
for(i in bd_pulmon$FECDIAG){
new_date[[contador]] <- str_c(str_sub(i, 1, 4),"-",str_sub(i, -4,-3),"-",str_sub(i, -2, -1))
contador <- contador +  1
}
new_date <- as.Date(new_date, "%Y-%m-%d")
new_date
## Fechas
new_date <- ""
contador <- 1
for(i in bd_pulmon$FECDIAG){
new_date[[contador]] <- str_c(str_sub(i, 1, 4),"-",str_sub(i, -4,-3),"-",str_sub(i, -2, -1))
contador <- contador +  1
}
new_date <- as.Date(new_date, "%Y-%m-%d")
length(new_date)
new_date
class(new_date)
## Fechas
new_date <- ""
contador <- 1
for(i in bd_pulmon$FECDIAG){
new_date[[contador]] <- str_c(str_sub(i, 1, 4),"-",str_sub(i, -4,-3),"-",str_sub(i, -2, -1))
contador <- contador +  1
}
new_date <- as.Date(new_date, "%Y-%m-%d")
bd_pulmon$FECDIAG_ <- new_date
by_fecdiag <- bd_pulmon %>% group_by(FECDIAG_)
conteo <- by_fecdiag %>% tally()
library(tidyverse)
library(lubridate)
casos_nuevos_ts <- ts(conteo[,2], start=2003, frequency=365)
plot(casos_nuevos_ts)
bd_pulmon$FECDIAG_
## Fechas
new_date <- ""
contador <- 1
for(i in bd_pulmon$FECDIAG){
new_date[[contador]] <- str_c(str_sub(i, 1, 4),"-",str_sub(i, -4,-3),"-",str_sub(i, -2, -1))
contador <- contador +  1
}
new_date <- as.Date(new_date, "%Y-%m-%d")
bd_pulmon$FECDIAG_ <- new_date
conteo
library(ggplot2)
names(conteo)
plot_1 <- ggplot(conteo, aes(x = FECDIAG_, y=n))+geom_line
plot_1 <- ggplot(conteo, aes(x = FECDIAG_, y=n))+geom_line()
plot_1
class(conteo$n)
by_fecdiag <- bd_pulmon %>% group_by(FECDIAG_)
conteo <- by_fecdiag %>% tally()
library(ggplot2)
plot_1 <- ggplot(conteo, aes(x = FECDIAG_, y=n))+geom_line()
names(conteo)
library(tidyverse)
library(lubridate)
casos_nuevos_ts <- ts(conteo, start=2003, frequency=365)
plot(casos_nuevos_ts)
class(conteo$n)
plot_1
plot_1 <- ggplot(conteo, aes(x = FECDIAG_, y=n))+geom_line()
pag
plot_1
conteo$n <- sprint("%1.1f", conteo$n)
conteo$n <- sprintf("%1.1f", conteo$n)
class(conteo$n)
plot_1 <- ggplot(conteo, aes(x = FECDIAG_, y=n))+geom_line()
plot_1
conteo$n <- noquote(sprintf("%1.1f", conteo$n))
class(conteo$n)
conteo$n <- noquote(sprintf("%1.1f", conteo$n))
a <- noquote(sprintf("%1.1f", conteo$n))
x <- conteo$n
a <- sprintf("%1.1f", x)
x <- conteo$n
a <- sprintf("%1.1f", x)
a <- sprintf("%1.3f", x)
n
as.double(x)
class(as.double(x))
plot_1 <- ggplot(as.double(conteo), aes(x = FECDIAG_, y=n))+geom_line()
plot_1 <- ggplot(as.numeric(conteo), aes(x = FECDIAG_, y=n))+geom_line()
conteo <- by_fecdiag %>% tally()
plot_1 <- ggplot(as.numeric(conteo), aes(x = FECDIAG_, y=n))+geom_line()
plot_1 <- ggplot(conteo, aes(x = FECDIAG_, y=as.double(n)))+geom_line()
plot_1
class(conteo$n)
class(asdouble(conteo$n))
class(as.double(conteo$n))
plot(x = bd_pulmon$EDAD, X)
plot(x = bd_pulmon$EDAD, x)
plot(x = bd_pulmon$EDAD, y= x)
plot(x = bd_pulmon$EDAD, y=bd_pulmon$FECDIAG )
by_fecdiag <- bd_pulmon %>% group_by(FECDIAG_)
conteo <- by_fecdiag %>% tally()
x <- conteo$n
class(as.double(x))
a <- sprintf("%1.3f", x)
b <- noquote(sprintf("%1.1f",x))
noquote(sprintf("%1.3f",x))   # converts character type to float type
library(ggplot2)
plot_1 <- ggplot(conteo, aes(x = FECDIAG_, y=as.double(n)))+geom_line()
as.in
casos_nuevos_ts <- ts(conteo, start=2003, frequency=365)
casos_nuevos_ts
as.double(n)
x
class(as.double(x))
as.double(x)
as.numeric(x)
as.double(x)
plot_1 <- ggplot(conteo, aes(x = FECDIAG_, y=as.numeric(n)))+geom_line()
plot_1
x <- (conteo$n)^2
plot_1 <- ggplot(conteo, aes(x = FECDIAG_, y=as.numeric(x)))+geom_line()
plot_1
x <- (conteo$n)^3
plot_1 <- ggplot(conteo, aes(x = FECDIAG_, y=as.numeric(x)))+geom_line()
plot_1
plot_1 <- ggplot(conteo, aes(x = FECDIAG_, y=x))+geom_line()
plot_1
x <- (conteo$n)^2
plot_1 <- ggplot(conteo, aes(x = FECDIAG_, y=x))+geom_line()
plot_1
x <- LOG(conteo$n)
x <- log(conteo$n)
plot_1 <- ggplot(conteo, aes(x = FECDIAG_, y=x))+geom_line()
plot_1
x
ot_1
plot_1
x <- log10(conteo$n)
x
plot_1 <- ggplot(conteo, aes(x = FECDIAG_, y=x))+geom_line()
plot_1
x <- float(conteo$n)
x <- (conteo$n)
by_fecdiag <- bd_pulmon %>% group_by(FECDIAG_)
conteo <- by_fecdiag %>% tally()
x <- (conteo$n)
as.numeric(x)
as.double(x)
a <- sprintf("%1.3f", x)
b <- noquote(sprintf("%1.1f",x))
noquote(sprintf("%1.3f",x))   # converts character type to float type
library(ggplot2)
plot_1 <- ggplot(conteo, aes(x = FECDIAG_, y=x))+geom_line()
plot_1
names(conteo)
library(tidyverse)
library(lubridate)
casos_nuevos_ts <- ts(conteo, start=2003, frequency=365)
class(as.double(conteo$n))
plot_1 <- ggplot(conteo, aes(x = FECDIAG_, y=b))+geom_line()
plot_1
by_fecdiag <- bd_pulmon %>% group_by(FECDIAG_)
conteo <- by_fecdiag %>% tally()
x <- (conteo$n)
a <- sprintf("%1.3f", x)
b <- noquote(sprintf("%1.1f",x))
library(ggplot2)
plot_1 <- ggplot(conteo, aes(x = FECDIAG_, y=b))+geom_line()
plot_1
ibrary(tidyverse)
casos_nuevos_ts <- ts(conteo, start=2003, frequency=365)
casos_nuevos_ts
casos_nuevos_ts <- ts(conteo[,2], start=2003, frequency=365)
casos_nuevos_ts
